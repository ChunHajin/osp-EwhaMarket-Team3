{% extends "index.html" %}

{% block title %}상품 수정 | 이화마켓{% endblock %}

{% block styles %}
<link rel="stylesheet" href="css/product-create.css">
{% endblock %}

{% block section %}
<main class="container create-wrap">
    <h1 class="create-title">상품 수정</h1>

    <form id="productUpdateForm" action="/submit_item_update" method="POST" enctype="multipart/form-data"
        class="create-form card" autocomplete="off">

        <input type="hidden" name="original_key" value="{{ item_key }}">

        <section class="left">
            <div class="field">
                <label for="title">상품</label>
                <div class="control">
                    <input id="title" name="title" class="form-input" type="text" placeholder="제목을 작성하세요" required
                        value="{{ item_data.title | default('') }}" />
                </div>
            </div>

            <div class="field">
                <label>작성자 아이디</label>
                <div class="control control-static">{{ user_id | default('로그인 필요') }}</div>
            </div>

            <div class="field">
                <label for="price">가격</label>
                <div class="control">
                    <input id="price" name="price" class="form-input" type="number" min="0" step="100"
                        value="{{ item_data.price | default('') }}" />
                </div>
            </div>

            <div class="field">
                <label for="category">카테고리</label>
                <div class="control">
                    <select id="category" name="category" class="form-input" required>
                        <option value="" {% if not item_data or not item_data.category %}selected disabled{% endif %}>선택
                        </option>
                        <option {% if item_data.category=='전공서적' %}selected{% endif %}>전공서적</option>
                        <option {% if item_data.category=='전자기기' %}selected{% endif %}>전자기기</option>
                        <option {% if item_data.category=='생활용품' %}selected{% endif %}>생활용품</option>
                        <option {% if item_data.category=='의류/잡화' %}selected{% endif %}>의류/잡화</option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="region">지역</label>
                <div class="control">
                    <select id="region" name="region" class="form-input">
                        <option value="" {% if not item_data or not item_data.region %}selected disabled{% endif %}>선택
                        </option>
                        <option {% if item_data.region=='ECC' %}selected{% endif %}>ECC</option>
                        <option {% if item_data.region=='정문' %}selected{% endif %}>정문</option>
                        <option {% if item_data.region=='후문' %}selected{% endif %}>후문</option>
                        <option {% if item_data.region=='신촌' %}selected{% endif %}>신촌</option>
                        <option {% if item_data.region=='기타' %}selected{% endif %}>기타</option>
                        <option value="" {% if item_data.region=='선택 안함' %}selected{% endif %}>선택 안함</option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="trade_method">거래방식</label>
                <div class="control">
                    <select id="trade_method" name="trade_method" class="form-input">
                        <option value="" {% if not item_data or not item_data.trade_method %}selected disabled{% endif
                            %}>선택</option>
                        <option {% if item_data.trade_method=='직거래' %}selected{% endif %}>직거래</option>
                        <option {% if item_data.trade_method=='택배' %}selected{% endif %}>택배</option>
                    </select>
                </div>
            </div>

            <div class="field">
                <label for="status">상태</label>
                <div class="control">
                    <select id="status" name="status" class="form-input">
                        <option value="" {% if not item_data or not item_data.status %}selected disabled{% endif %}>선택
                        </option>
                        <option {% if item_data.status=='상태 최상' %}selected{% endif %}>상태 최상</option>
                        <option {% if item_data.status=='약간의 하자' %}selected{% endif %}>약간의 하자</option>
                        <option {% if item_data.status=='사용감 있음' %}selected{% endif %}>사용감 있음</option>
                    </select>
                </div>
            </div>
        </section>

        <section class="right">
            <div class="field vertical">
                <label for="photos">사진 첨부</label>
                <div class="photo-drop" tabindex="0">
                    {% if item_data.img_path %}
                    <p>현재 이미지: <img src="/{{ item_data.img_path }}"
                            style="max-width: 100px; max-height: 100px; display: block; margin-top: 10px; border: 1px solid #ddd;" />
                        (새 파일 선택 시 덮어쓰기)</p>
                    {% endif %}
                    <input id="photos" name="photos" type="file" accept="image/*" multiple />
                    <div class="plus">+</div>
                </div>
            </div>

            <div class="field vertical">
                <label for="desc">상품 설명</label>
                <textarea id="desc" name="desc" class="form-input textarea" rows="7"
                    placeholder="내용을 작성하세요">{{ item_data.desc | default('') }}</textarea>
            </div>
        </section>

        <div class="actions">
            <button type="submit" class="btn btn-green btn-large submit-btn">
                수정하기
            </button>
        </div>
    </form>
</main>
{% endblock %}